% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dataset-flickr.R
\name{flickr8k_dataset}
\alias{flickr8k_dataset}
\title{Flickr8k Dataset}
\usage{
flickr8k_dataset(
  root = tempdir(),
  train = TRUE,
  transform = NULL,
  target_transform = NULL,
  download = FALSE
)
}
\arguments{
\item{root}{Character. Root directory for dataset storage. The dataset will be stored under \code{root/flickr8k}.}

\item{train}{Logical. If \code{TRUE}, loads the training set. If \code{FALSE}, loads the test set. Default is \code{TRUE}.}

\item{transform}{Optional function to apply to each image (e.g., resize, normalization). Images are RGB of varied dimensions.}

\item{target_transform}{Optional function to transform the captions. Default is \code{NULL}.}

\item{download}{Logical. Whether to download and process the dataset if it's not already available. Default is \code{FALSE}.}
}
\value{
An object of class \code{flickr8k_dataset}, which behaves like a torch dataset.
Each element is a named list:
\itemize{
\item \code{x}: a H x W x 3 integer array representing an RGB image.
\item \code{y}: a character vector of captions for the image.
}
}
\description{
Flickr8k Dataset
}
\details{
Loads the Flickr8k dataset consisting of 8,000 images with five human-annotated captions per image.

The dataset is split into:
\itemize{
\item \code{"train"}: training subset with captions.
\item \code{"test"}: test subset with captions.
}
}
\examples{
\dontrun{
flickr <- flickr8k_dataset(train = TRUE, download = TRUE)

# Define a custom collate function to resize images in the batch
resize_collate_fn <- function(batch) {
  xs <- lapply(batch, function(sample) {
    torchvision::transform_resize(sample$x, c(224, 224))
  })
  xs <- torch::torch_stack(xs)
  ys <- sapply(batch, function(sample) sample$y)
  list(x = xs, y = ys)
}

dl <- torch::dataloader(dataset = flickr, batch_size = 4, collate_fn = resize_collate_fn)
batch <- dataloader_next(dataloader_make_iter(dl))
batch$x  # batched image tensors resized to 224x224
batch$y  # list of caption vectors
}

}
